{% extends "site_base.html" %}
{% load i18n %}
{% load mks %}
{% load activity_tags %}
{% load aggregated_activity_tags %}
{% load pagination_tags %}
{% load avatar_tags %}
{% block extratitle %}{{object.username}}{% endblock %}
{% block header %}<h1>{{object.username}}</h1>{% endblock %}
{% block content %}
    {% if object.get_profile.public_profile %}
        <div style="float:right;">
            {% avatar object 75 %}
        </div>
        <p style="float:right;padding-right:1em;">{{ object.get_profile.description|linebreaksbr }}</p>
        <div class="clear"></div>
        <h2>{% trans 'Following Members' %}:</h2>
        <ul class='favorites-list'>
        {% for member in object.get_profile.members %}
            <li><a href="{{member.get_absolute_url}}">{{ member.name }}</a></li>
        {% empty %}
            <li>{% trans 'Not following any memebers.' %}</li>
        {% endfor %}
        </ul>
        <div>
            <h2>{% trans 'Badges' %}:</h2>
            <ul class='favorites-list'>
            {% for badge in object.get_profile.get_badges %}
                <li><a href="{{badge.get_absolute_url}}">{{ badge }}</a></li>
            {% empty %}
                <li>{% trans 'No badges yet.' %}</li>
            {% endfor %}
            </ul>
        </div>
        <div class="activities" >
            <h2>{% trans 'Activities' %}</h2>
            <div style="clear:both;"></div>
        {% autopaginate aggr_actions %}
        {% for aggr_action in aggr_actions %}
            {% with aggr_action.timestamp|timesince as since %}
            {% ifchanged %}<h3>{% trans "before" %}&nbsp;{{ since }}</h3>{% endifchanged %}
            {% endwith %}
            <p>
            	{% display_aggr_action aggr_action %} 
            </p>
        {% empty %}
            <p>
            {% trans "Sorry, no data is available" %}
            </p>
        {% endfor %}
        {% paginate %}
        </div>
    {% else %}
        {% trans "Sorry, this user has selected not to share his profile" %}
    {% endif %}
<br/>
{% endblock %}
